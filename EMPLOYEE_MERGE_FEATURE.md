# üîó –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

## –û–ø–∏—Å–∞–Ω–∏–µ
–ù–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–æ–∑–≤–æ–ª—è–µ—Ç:
1. **–û–±—ä–µ–¥–∏–Ω—è—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤—Ä—É—á–Ω—É—é** —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "üë• –°–û–¢–†–£–î–ù–ò–ö–ò"
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è** –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤—ã—Ö Excel —Ñ–∞–π–ª–æ–≤

---

## üìã –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ

### 1Ô∏è‚É£ –†—É—á–Ω–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ (—á–µ—Ä–µ–∑ –º–µ–Ω—é)

**–®–∞–≥–∏:**
1. –ù–∞–∂–º–∏—Ç–µ **"üë• –°–û–¢–†–£–î–ù–ò–ö–ò"**
2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–ª—É–± (–ú–æ—Å–∫–≤–∏—á/–ê–Ω–æ—Ä–∞)
3. –ü–æ–ª—É—á–∏—Ç–µ —Ñ–∞–π–ª —Å–æ —Å–ø–∏—Å–∫–æ–º –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–æ–º–µ—Ä–∞ —á–µ—Ä–µ–∑ **–¥–µ—Ñ–∏—Å** –∏–ª–∏ **–∑–∞–ø—è—Ç—É—é**:
   - `1-5` ‚Üí –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ ‚Ññ1 –∏ ‚Ññ5
   - `3-7-30` ‚Üí –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å ‚Ññ3, ‚Ññ7 –∏ ‚Ññ30
5. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
6. –ù–∞–∂–º–∏—Ç–µ **"üîó –û–ë–™–ï–î–ò–ù–ò–¢–¨"**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–µ—Ä–≤—ã–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è **–≥–ª–∞–≤–Ω—ã–º**
- –í—Å–µ –∑–∞–ø–∏—Å–∏ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ **–ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è** –Ω–∞ –≥–ª–∞–≤–Ω–æ–≥–æ
- –î–∞–Ω–Ω—ã–µ **–∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è** (—Å—É–º–º–∏—Ä—É—é—Ç—Å—è) –µ—Å–ª–∏ –µ—Å—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–æ –¥–∞—Ç–µ –∏ –∫–∞–Ω–∞–ª—É
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î

**–ü—Ä–∏–º–µ—Ä:**
```
–î–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è:
  –°–ë –ò–≤–∞–Ω–æ–≤ - –Ω–∞–ª 5000 (01.12)
  –°–ë –ü–µ—Ç—Ä–æ–≤ - –±–µ–∑–Ω–∞–ª 3000 (01.12)
  –î1 –Ø–Ω–∞ - –Ω–∞–ª 2000 (01.12)

–û–±—ä–µ–¥–∏–Ω—è–µ–º: 1-2 (–°–ë –ò–≤–∞–Ω–æ–≤ + –°–ë –ü–µ—Ç—Ä–æ–≤ ‚Üí –°–ë –ò–≤–∞–Ω–æ–≤)

–ü–æ—Å–ª–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è:
  –°–ë –ò–≤–∞–Ω–æ–≤ - –Ω–∞–ª 5000 (01.12)
  –°–ë –ò–≤–∞–Ω–æ–≤ - –±–µ–∑–Ω–∞–ª 3000 (01.12)
  –î1 –Ø–Ω–∞ - –Ω–∞–ª 2000 (01.12)
```

---

### 2Ô∏è‚É£ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ Excel

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –í—ã **—É–∂–µ –æ–±—ä–µ–¥–∏–Ω–∏–ª–∏** —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Ä–∞–Ω–µ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –°–ë –ò–≤–∞–Ω–æ–≤ ‚Üí –î1 –Ø–Ω–∞)
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç–µ –Ω–æ–≤—ã–π Excel —Ñ–∞–π–ª —Å –¥–∞–Ω–Ω—ã–º–∏
3. –í —Ñ–∞–π–ª–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è **–°–ë –ò–≤–∞–Ω–æ–≤**

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ë–æ—Ç **–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ë–î**: –±—ã–ª –ª–∏ "–°–ë –ò–≤–∞–Ω–æ–≤" –æ–±—ä–µ–¥–∏–Ω—ë–Ω?
2. **–î–ê** ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:
   ```
   ‚ö†Ô∏è –û–ë–ù–ê–†–£–ñ–ï–ù–´ –û–ë–™–ï–î–ò–ù–Å–ù–ù–´–ï –°–û–¢–†–£–î–ù–ò–ö–ò
   
   –í —Ñ–∞–π–ª–µ –Ω–∞–π–¥–µ–Ω—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–Ω–µ–µ –±—ã–ª–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã:
   
   üìå –ù–ê–õ
      ‚Ä¢ –°–ë - –ò–≤–∞–Ω–æ–≤
      ‚Üí –æ–±—ä–µ–¥–∏–Ω—ë–Ω —Å –î1 - –Ø–Ω–∞
   
   üí° –ß—Ç–æ –¥–µ–ª–∞—Ç—å?
   
   ‚úÖ –î–ê - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ
      (–¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–ø–∏—Å–∞–Ω—ã —Å –∫–æ–¥–æ–º –î1 - –Ø–Ω–∞)
   
   ‚ùå –ù–ï–¢ - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ –≤ —Ñ–∞–π–ª–µ
      (–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ, –∑–∞–ø–∏—Å–∞—Ç—å –∫–∞–∫ –°–ë - –ò–≤–∞–Ω–æ–≤)
   
   [‚úÖ –î–ê, –ó–ê–ú–ï–ù–ò–¢–¨]  [‚ùå –ù–ï–¢, –ö–ê–ö –í –§–ê–ô–õ–ï]
   ```

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç:**
   - **–î–ê** ‚Üí –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å –∫–æ–¥–æ–º "–î1 –Ø–Ω–∞"
   - **–ù–ï–¢** ‚Üí –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–∞–∫ "–°–ë –ò–≤–∞–Ω–æ–≤" (–∫–∞–∫ –≤ —Ñ–∞–π–ª–µ)

---

## üóÑÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –¢–∞–±–ª–∏—Ü–∞ `employee_merges`
–•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è—Ö:
```sql
CREATE TABLE employee_merges (
    id INTEGER PRIMARY KEY,
    club TEXT,
    original_code TEXT,      -- –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ (–°–ë)
    original_name TEXT,      -- –ò—Å—Ö–æ–¥–Ω–æ–µ –∏–º—è (–ò–≤–∞–Ω–æ–≤)
    merged_code TEXT,        -- –ö–æ–¥ –ø–æ—Å–ª–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è (–î1)
    merged_name TEXT,        -- –ò–º—è –ø–æ—Å–ª–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è (–Ø–Ω–∞)
    created_at TEXT          -- –î–∞—Ç–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è
)
```

### –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤ `database.py`

**`merge_employees(club, main_code, main_name, employees_to_merge)`**
- –û–±—ä–µ–¥–∏–Ω—è–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≤ –ë–î
- –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- –ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —Å—É–º–º—ã –ø—Ä–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è—Ö
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–∏

**`check_employee_merge(club, code, name)`**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –±—ã–ª –ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ–±—ä–µ–¥–∏–Ω—ë–Ω
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None` –µ—Å–ª–∏ –Ω–µ –æ–±—ä–µ–¥–∏–Ω—ë–Ω
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{'merged_code': ..., 'merged_name': ...}` –µ—Å–ª–∏ –æ–±—ä–µ–¥–∏–Ω—ë–Ω

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `bot.py`

**`save_file_data()`**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–π –ü–ï–†–ï–î —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- –ü—Ä–∏ –Ω–∞—Ö–æ–¥–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `show_merge_warning()`

**`show_merge_warning()`**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –î–ê/–ù–ï–¢

**`handle_callback_query()`**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
  - `upload_merge_yes` ‚Üí –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∑–∞–º–µ–Ω—ã
  - `upload_merge_no` ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ –≤ —Ñ–∞–π–ª–µ

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ** - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –æ–¥–∏–Ω —Ä–∞–∑, –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞
2. **–ö–æ–Ω—Ç—Ä–æ–ª—å** - –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –µ—Å—Ç—å –≤—ã–±–æ—Ä
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π
4. **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –≤—Å—è –∏—Å—Ç–æ—Ä–∏—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–π –≤ –ë–î

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–µ—Ä–≤–æ–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: üë• –°–û–¢–†–£–î–ù–ò–ö–ò ‚Üí –ú–æ—Å–∫–≤–∏—á
2. –ë–æ—Ç: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª —Å–æ —Å–ø–∏—Å–∫–æ–º
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: 5-12 (–°–ë –ò–≤–∞–Ω–æ–≤ + –°–ë –ü–µ—Ç—Ä–æ–≤)
4. –ë–æ—Ç: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: üîó –û–ë–™–ï–î–ò–ù–ò–¢–¨
6. –ë–æ—Ç: ‚úÖ –û–±—ä–µ–¥–∏–Ω–µ–Ω–æ! 15 –∑–∞–ø–∏—Å–µ–π –æ–±–Ω–æ–≤–ª–µ–Ω–æ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ —Å –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ó–ê–ì–†–£–ó–ò–¢–¨ –§–ê–ô–õ
2. –ó–∞–≥—Ä—É–∂–∞–µ—Ç Excel —Å "–°–ë –ò–≤–∞–Ω–æ–≤ 5000"
3. –ë–æ—Ç: ‚ö†Ô∏è –û–ë–ù–ê–†–£–ñ–ï–ù–´ –û–ë–™–ï–î–ò–ù–Å–ù–ù–´–ï –°–û–¢–†–£–î–ù–ò–ö–ò
       –°–ë –ò–≤–∞–Ω–æ–≤ ‚Üí –æ–±—ä–µ–¥–∏–Ω—ë–Ω —Å –î1 –Ø–Ω–∞
       [‚úÖ –î–ê] [‚ùå –ù–ï–¢]
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ‚úÖ –î–ê
5. –ë–æ—Ç: ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∫–∞–∫ –î1 –Ø–Ω–∞
```

---

## üéØ –ò—Ç–æ–≥

**–î–û:**
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Excel merge (–≤—Ä–µ–º–µ–Ω–Ω–æ)
- –ü—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –Ω—É–∂–Ω–æ –∑–∞–Ω–æ–≤–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è

**–ü–û–°–õ–ï:**
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –≤ –ë–î
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∏ –Ω–æ–≤—ã—Ö –∑–∞–≥—Ä—É–∑–∫–∞—Ö
- –ö–æ–Ω—Ç—Ä–æ–ª—å —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ –î–ê/–ù–ï–¢



